# @package _global_

defaults:
  - override /data: axov6
  - override /algorithm: vicreg
  - override /callbacks: default
  - override /trainer: gpu
  - override /evaluator: default
  - override /evaluator_callbacks: default
  - override /logger: mlflow

seed: 123
tags: ["axo_v6", "vae"]

experiment_name: vicreg_search
run_name: bs${data.batch_size}_lr${algorithm.optimizer.lr}_wd${algorithm.optimizer.weight_decay}_fblur${algorithm.feature_blur.prob}_om${algorithm.object_mask.prob}_lorr${algorithm.lorentz_rotation.prob}

callbacks:
  min_loss_ckpt:
    _target_: src.callbacks.model_checkpoint.SingleDatasetModelCheckpoint
    dirpath: '${paths.checkpoints_dir}/${experiment_name}/${run_name}'
    monitor: loss
    criterion:
      _target_: src.callbacks.checkpointing.criterion.Min
      top_k: 1

evaluator:
  ckpts:
    last: false
    single:
      loss: ['min']

evaluator_callbacks:
  loss:
    _target_: src.evaluation.callbacks.loss.LossCallback
    loss_names: ['loss']
